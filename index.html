<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='Content-type' content='text/html; charset=utf-8'>
    <title>List Component</title>
    <link rel="stylesheet" href="../shared/css/base.css" />
  </head>
  <body>
    <h1>List Component</h1>
    <div id="list">
      <p>
        If you can see this, the app is not working right.
      </p>
    </div>
    <script
src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js">
    </script>
    <script
src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js">
    </script>
    <script src="./shared/thirdparty/console-polyfill.js"></script>
    <script src="./build/react.js"></script>
    <script src="./build/react-dom.js"></script>
    <script src="../../build/JSXTransformer.js"></script>
    <script type="text/jsx">
      /**
       * @jsx React.DOM
       */

      //example class for subitems, taken from React tutorial
      var Comment = React.createClass({
      rawMarkup: function() {
      var rawMarkup = marked(this.props.data.toString(), {sanitize:
        true});
      return { __html: rawMarkup };
      },
      
      render: function() {
      return (
        <div className="comment">
          <h2 className="commentAuthor">
            {this.props.author}
          </h2>
          <span dangerouslySetInnerHTML={this.rawMarkup()} />
        </div>
        );
      }
      });
      var ListComponent = React.createClass({
        render: function() {
          var containerTag = this.props.containerTag.toString();
          var data = this.props.data;
          var message = "List contains " + data.length + " elements";
          return React.createElement(containerTag, {},
              data.map(function(dataUnit){
                return React.createElement(dataUnit.klass, 
                  {data: dataUnit.value});
              })
          );
        }
      });
      var ListComponentFactory = React.createFactory(ListComponent);
      setInterval(function() {
        ReactDOM.render(
          ListComponentFactory({containerTag: 'div', data: [{klass: Comment, value:5},
            {klass: Comment, value:4}, {klass: Comment, value:"**bold** move"},
            {klass: Comment, value:3}, {klass: Comment, value:6}]}),
          document.getElementById('list')
        );
      }, 50);
    </script>
  </body>
</html>
